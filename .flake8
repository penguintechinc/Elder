[flake8]
max-line-length = 120
exclude =
    .git,
    __pycache__,
    venv,
    .venv,
    env,
    ENV,
    apps/api/grpc/generated,
    node_modules,
    .eggs,
    *.egg

# Ignore specific errors
ignore =
    # F403: Star imports (used in pydal_models.py for validators)
    F403,
    # F405: May be undefined from star imports
    F405,
    # E303: Too many blank lines (formatting preference)
    E303,
    # W503: Line break before binary operator (conflicts with black)
    W503,
    # W504: Line break after binary operator (conflicts with black)
    W504,
    # E203: Whitespace before ':' (conflicts with black's slice formatting)
    E203,
    # E722: Bare except (acceptable for broad error handling in some contexts)
    E722,
    # F541: f-string without placeholders (sometimes used for consistency)
    F541,
    # F841: Local variable assigned but never used (common in error handling)
    F841,
    # E741: Ambiguous variable name (acceptable in specific contexts)
    E741,
    # C901: Function too complex (will be refactored later)
    C901,
    # E501: Line too long (black handles this)
    E501

# Per-file ignores
per-file-ignores =
    # Ignore F821 (undefined names) in model files - these are forward references
    apps/api/models/*.py:F821,
    # Ignore F821 in search.py - current_user from decorator context
    apps/api/api/v1/search.py:F821,
    # Ignore F821 in sync.py - current_user from decorator context
    apps/api/api/v1/sync.py:F821,
    # Ignore F401 (unused imports) in __init__.py files
    __init__.py:F401,
    # Ignore E501 (line too long) in migration files
    alembic/versions/*.py:E501

# McCabe complexity (disabled via C901 in ignore list)
max-complexity = 25
