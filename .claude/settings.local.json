{
  "permissions": {
    "allow": [
      "Bash(tree:*)",
      "Bash(git add:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nPhase 6: Enterprise Features - Issues, Resource Roles, and Typed Metadata\n\nAdded comprehensive enterprise features for Elder:\n\n## License Server Integration\n- Integrated PenguinTech License Server client with validation and keepalive\n- @license_required decorator for tier-based feature gating\n- Caching and graceful degradation to community tier\n\n## Resource-Level Roles System\n- ResourceRole model with Maintainer/Operator/Viewer roles\n- Per-entity and per-organization role assignments\n- @resource_role_required decorator with hierarchical permission checking\n- 6 REST endpoints for resource role management\n\n## GitHub-Style Issues System\n- Issue, IssueLabel, IssueComment, IssueEntityLink models\n- Full GitHub-style features: status, priority, assignments, labels\n- Recursive issue queries for organizations (includes all children + entities)\n- Direct issue queries for entities\n- 14 REST endpoints with role-based permissions:\n  - Maintainer: Full CRUD\n  - Operator: Create/close issues, add comments/labels\n  - Viewer: View issues, create new issues, add comments\n\n## Typed Metadata System\n- MetadataField model with type validation (string, number, date, boolean, json)\n- Type coercion and validation on set\n- System metadata (read-only) support\n- 8 REST endpoints (4 for entities, 4 for organizations)\n\n## Database Migration\n- Added 7 new tables: resource_roles, issues, issue_labels, \n  issue_label_assignments, issue_comments, issue_entity_links, metadata_fields\n- Default issue labels created (bug, enhancement, documentation, etc.)\n\n## API Summary\n- New Endpoints: 28 (Resource Roles: 6, Issues: 14, Metadata: 8)\n- Total API Endpoints: 79\n- All endpoints protected with license tier + resource role checks\n\n## Files Created: 12 new files\n- Models: resource_role.py, issue.py, metadata.py\n- Schemas: resource_role.py, issue.py, metadata.py\n- APIs: resource_roles.py, issues.py, metadata.py\n- Licensing: client.py, decorators.py\n- Migration: 001_add_enterprise_features.py\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git commit:*)",
      "Bash(chmod:*)",
      "Bash(./scripts/generate-grpc.sh:*)",
      "Bash(pip3 install:*)",
      "Bash(make generate-grpc:*)",
      "Bash(git ls-remote:*)",
      "Read(//home/penguin/code/website/**)",
      "Bash(make docker-build:*)",
      "Bash(pip3 index:*)",
      "Bash(docker build:*)",
      "Bash(test:*)",
      "Bash(docker-compose up:*)",
      "Bash(docker-compose down:*)",
      "Bash(docker-compose ps:*)",
      "Bash(docker-compose logs:*)",
      "Bash(docker-compose build:*)",
      "Bash(docker-compose rm:*)",
      "Bash(docker logs:*)",
      "Bash(curl:*)",
      "Bash(docker-compose exec:*)",
      "Bash(docker stop:*)",
      "Bash(docker rm:*)",
      "Bash(find:*)",
      "Bash(npm install:*)",
      "Bash(docker run:*)",
      "Bash(docker exec:*)",
      "Bash(docker-compose stop:*)",
      "Bash(echo:*)",
      "Bash(/home/penguin/code/Elder/scripts/test-api-docker.sh:*)",
      "Bash(docker-compose restart:*)",
      "Bash(docker volume rm:*)",
      "Bash(awk:*)",
      "Bash(xargs:*)",
      "Bash(docker system prune:*)",
      "Bash(./scripts/test-api-docker.sh:*)",
      "Bash(npm run build:*)",
      "Bash(docker start:*)",
      "Bash(docker ps:*)",
      "Bash(docker-compose:*)",
      "Bash(mkdir:*)",
      "Bash(elder_api:latest)",
      "Bash(python3:*)",
      "Bash(docker network:*)",
      "Bash(TOKEN=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEsInVzZXJuYW1lIjoiYWRtaW4iLCJ0eXBlIjoiYWNjZXNzIiwiaWF0IjoxNzYxNDE4NjA4LCJleHAiOjE3NjE0MjIyMDh9.PMYweQ6dY5Ky93Nd0USetBkEc_cuWyljuNEgoqndFWM\" curl -s http://localhost:5000/api/v1/organizations -H \"Authorization: Bearer $TOKEN\")",
      "Read(//tmp/**)",
      "Bash(/tmp/test_profile.sh)",
      "Bash(cat:*)",
      "Bash(/tmp/test_all.sh)",
      "Bash(/tmp/test_identity.sh)",
      "Bash(bash:*)",
      "Bash(TOKEN=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOjEsInVzZXJuYW1lIjoiYWRtaW4iLCJ0eXBlIjoiYWNjZXNzIiwiaWF0IjoxNzYxNDE4NjA4LCJleHAiOjE3NjE0MjIyMDh9.PMYweQ6dY5Ky93Nd0USetBkEc_cuWyljuNEgoqndFWM\" curl:*)",
      "Read(//home/penguin/Pictures/Screenshots/**)",
      "Read(//home/penguin/code/killkrill/**)",
      "Bash(for file in /home/penguin/code/Elder/apps/api/api/v1/backup.py /home/penguin/code/Elder/apps/api/api/v1/discovery.py /home/penguin/code/Elder/apps/api/api/v1/entity_types.py /home/penguin/code/Elder/apps/api/api/v1/keys.py /home/penguin/code/Elder/apps/api/api/v1/search.py /home/penguin/code/Elder/apps/api/api/v1/sync.py /home/penguin/code/Elder/apps/api/api/v1/webhooks.py)",
      "Bash(do sed -i 's/token_required/login_required/g' \"$file\")",
      "Bash(done)",
      "Bash(TOKEN=\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiIxIiwidXNlcm5hbWUiOiJhZG1pbiIsInR5cGUiOiJhY2Nlc3MiLCJpYXQiOjE3NjE2MDc0NDUsImV4cCI6MTc2MTYyMTg0NX0.AkTm2gQUFCG7THxKAvqp33Hub-CAte14tfc3FEVevNo\")",
      "Bash(git log:*)",
      "Bash(docker inspect:*)",
      "Bash(docker cp:*)",
      "Bash(for file in Issues.tsx Projects.tsx Entities.tsx)",
      "Bash(do echo \"=== Checking $file ===\")"
    ],
    "deny": [],
    "ask": []
  }
}
