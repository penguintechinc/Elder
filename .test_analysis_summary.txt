================================================================================
TEST FAILURE ANALYSIS & REMEDIATION PLAN - SUMMARY
================================================================================

PROJECT: Elder v3.0.5
ANALYSIS DATE: 2026-01-26
CURRENT STATUS: 89/120 tests passing (74.2%)
TARGET: 120/120 tests passing (100%)

================================================================================
EXECUTIVE SUMMARY
================================================================================

31 failing tests across 4 test suites due to:

1. MISSING REQUIRED FIELDS IN CREATE OPERATIONS (18 failures)
   - Organizations: Must set tenant_id (auto-derivation recommended)
   - Entities: Require organization_id (not in test data)
   - Issues: Require reporter_id (currently optional in tests)
   - Services: Require organization_id (not in test data)
   - Projects: Require organization_id (not in test data)
   - Labels: Wrong field names (keyâ†’name, valueâ†’description)

2. EMAIL VALIDATION - NULL BYTE INJECTION (1 failure)
   - Validator doesn't reject \x00 byte injection
   - Fix: Add null byte check in validate_email_with_local()

3. MISSING PYDANTIC MODELS (3 failures)
   - Milestones endpoint exists but no CreateMilestoneRequest model
   - DataStores endpoint exists but no CreateDataStoreRequest model
   - Webhooks endpoint missing proper request validation model

4. WEB UI ROUTING & ADMIN PAGES (13 failures)
   - Admin pages (/admin/*) not accessible
   - SPA deep routes not served (need nginx fallback)
   - Security headers missing
   - CSRF token implementation needed

5. INTEGRATION TEST DATABASE CONTEXT (8 failures)
   - Missing tenant_id in organization setup
   - Missing organization_id in entity references
   - No cleanup fixture for database isolation

================================================================================
TEST SUITE BREAKDOWN
================================================================================

TEST SUITE                      PASSING    TOTAL    % PASS   STATUS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
API Validation Tests            27/28      28       96%      ðŸŸ¡ NEAR PASS
REST API Tests                  34/43      43       79%      ðŸ”´ FAILING
Integration Tests               1/9        9        11%      ðŸ”´ CRITICAL
Web UI Tests                    27/40      40       68%      ðŸŸ¡ FAILING
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
TOTAL                          89/120     120       74%      ðŸ”´ NEEDS WORK

================================================================================
CRITICAL ISSUES RANKED BY IMPACT
================================================================================

RANK  TEST SUITE          ISSUE                              IMPACT    EFFORT
â”€â”€â”€â”€  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”€â”€â”€â”€â”€â”€â”€â”€  â”€â”€â”€â”€â”€â”€
1     Integration Tests  Missing tenant_id + org refs       8 tests   LOW
2     REST API Tests     Missing organization_id fields     6 tests   LOW
3     API Validation     NULL byte injection in email       1 test    LOW
4     REST API Tests     Wrong label field names            1 test    LOW
5     REST API Tests     Missing Pydantic models            2 tests   MED
6     Web UI Tests       Admin pages/SPA routing            5 tests   MED
7     Web UI Tests       Security headers + CSRF           4 tests   MED
8     Web UI Tests       Detail pages routing               4 tests   LOW

================================================================================
DETAILED FINDINGS
================================================================================

ISSUE 1: EMAIL VALIDATION NULL BYTE INJECTION
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: /home/penguin/code/elder/apps/api/models/schemas.py (lines 13-17)
FUNCTION: validate_email_with_local()
PROBLEM: Doesn't check for null bytes before validation
TEST FAILING: test_null_byte_injection
REQUIRED FIELD: None (add validation)
FIX EFFORT: 5 minutes

ADD:
    if '\x00' in value:
        raise ValueError("contains null bytes")

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ISSUE 2: ORGANIZATION CREATION - MISSING TENANT_ID
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: /home/penguin/code/elder/apps/api/api/v1/organizations.py (lines 84-116)
PROBLEM: tenant_id is NOT NULL constraint in database
TEST FAILING: test_create_organization (REST API)
REQUIRED FIELD: tenant_id (Integer)
RECOMMENDED FIX: Auto-derive from parent_id or default to 1
FIX EFFORT: 15 minutes

ADD TO create_organization():
    if 'tenant_id' not in data:
        if data.get('parent_id'):
            parent = db.organizations[data['parent_id']]
            data['tenant_id'] = parent.tenant_id
        else:
            data['tenant_id'] = 1

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ISSUE 3: ENTITY CREATION - MISSING ORGANIZATION_ID
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: /home/penguin/code/elder/shared/py_libs/py_libs/pydantic/models/entity.py (line 90)
PROBLEM: Test not providing required organization_id
TEST FAILING: test_create_entity (E2E CRUD)
REQUIRED FIELD: organization_id (Integer >= 1)
FIX: Update test to include valid organization_id
FIX EFFORT: 5 minutes per test

CHANGE:
    Before: entity_data = {"name": "...", "entity_type": "..."}
    After:  entity_data = {"name": "...", "entity_type": "...", "organization_id": 1}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ISSUE 4: ISSUE CREATION - MISSING REPORTER_ID
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: /home/penguin/code/elder/shared/py_libs/py_libs/pydantic/models/issue.py (line 124)
PROBLEM: Test not providing required reporter_id
TEST FAILING: test_create_issue (E2E CRUD)
REQUIRED FIELD: reporter_id (Integer >= 1)
FIX: Add authenticated user's identity ID to test
FIX EFFORT: 10 minutes per test

CHANGE:
    Before: issue_data = {"title": "..."}
    After:  issue_data = {"title": "...", "reporter_id": user_id, "organization_id": org_id}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ISSUE 5: LABEL CREATION - WRONG FIELD NAMES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: /home/penguin/code/elder/shared/py_libs/py_libs/pydantic/models/label.py (line 55)
PROBLEM: Tests use "key"/"value" instead of "name"/"description"
TEST FAILING: test_create_label (E2E CRUD)
REQUIRED FIELDS:
    - name (String) [test uses "key"]
    - description (String) [test uses "value"]
    - color (String, optional)
FIX: Update test field names
FIX EFFORT: 2 minutes

CHANGE:
    Before: {"key": "...", "value": "...", "color": "#ff0000"}
    After:  {"name": "...", "description": "...", "color": "#ff0000"}

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ISSUE 6: SERVICE CREATION - MISSING ORGANIZATION_ID
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: /home/penguin/code/elder/shared/py_libs/py_libs/pydantic/models/service.py (line 113)
PROBLEM: Test not providing required organization_id
TEST FAILING: test_create_service (CREATE auth test)
REQUIRED FIELD: organization_id (Integer >= 1)
FIX: Add organization_id to test data
FIX EFFORT: 5 minutes

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ISSUE 7: PROJECT CREATION - MISSING ORGANIZATION_ID
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: /home/penguin/code/elder/apps/api/api/v1/projects.py (line 133)
PROBLEM: Test not providing required organization_id
TEST FAILING: test_create_project (CREATE auth test)
REQUIRED FIELD: organization_id (Integer)
FIX: Add organization_id to test data
FIX EFFORT: 5 minutes

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ISSUE 8: MILESTONE CREATION - MISSING PYDANTIC MODEL
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: /home/penguin/code/elder/shared/py_libs/py_libs/pydantic/models/milestone.py
PROBLEM: Endpoint exists but no CreateMilestoneRequest model defined
TEST FAILING: test_create_milestone (E2E CRUD)
REQUIRED FIELDS:
    - title (String, required)
    - organization_id (Integer, required)
    - description (String, optional)
    - due_date (DateTime, optional)
    - status (String, default: "active")
FIX: Create new Pydantic model file
FIX EFFORT: 20 minutes

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ISSUE 9: DATA_STORE CREATION - MISSING PYDANTIC MODEL
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: /home/penguin/code/elder/shared/py_libs/py_libs/pydantic/models/datastore.py
PROBLEM: Endpoint exists but no CreateDataStoreRequest model defined
TEST FAILING: test_create_data_store (E2E CRUD)
REQUIRED FIELDS:
    - name (String, required)
    - organization_id (Integer, required)
    - data_classification (String, required)
    - storage_type (String, required)
    - description (String, optional)
FIX: Create new Pydantic model file
FIX EFFORT: 20 minutes

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ISSUE 10: WEBHOOK CREATION - MISSING VALIDATION MODEL
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: /home/penguin/code/elder/apps/api/api/v1/webhooks.py (line 62-95)
PROBLEM: Manual validation instead of Pydantic model + @validated_request
TEST FAILING: (if present) test_create_webhook
REQUIRED FIELDS:
    - name (String, required)
    - url (String, required)
    - events (List[String], required)
    - organization_id (Integer, required)
    - secret (String, optional)
    - description (String, optional)
    - headers (Dict, optional)
FIX: Create WebhookRequest model and use decorator
FIX EFFORT: 30 minutes

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ISSUE 11: INTEGRATION TESTS - DATABASE SETUP
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
FILE: /home/penguin/code/elder/tests/integration/test_workflow_complete.py
PROBLEM: Organization creations missing tenant_id; no cleanup fixture
TEST FAILING: All CREATE tests (8 tests)
ROOT CAUSE: Database transaction isolation issues
FIXES:
    1. Add tenant_id=1 to all Organization() calls
    2. Ensure organization_id in all Entity() calls
    3. Add cleanup fixture to reset database between tests
FIX EFFORT: 25 minutes

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ISSUE 12: WEB UI - ADMIN PAGES NOT ACCESSIBLE
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
TESTS FAILING: (5 tests)
    - test_admin_users_page
    - test_admin_organizations_page
    - test_admin_settings_page
    - test_admin_audit_log
    - test_admin_licenses
PROBLEM: Routes /admin/* return 404
ROOT CAUSE: Either admin pages not implemented in React or not registered
FIX: Verify admin components exist; register routes
FIX EFFORT: 60-120 minutes (depends on implementation status)

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ISSUE 13: WEB UI - SPA DEEP ROUTES NOT SERVED
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
TESTS FAILING: (4 tests)
    - test_organization_detail_page
    - test_entity_detail_page
    - test_service_detail_page
    - test_project_detail_page
PROBLEM: Routes like /organizations/1/details return 404 instead of SPA
ROOT CAUSE: nginx not configured to serve SPA for non-asset routes
FIX: Update nginx to serve index.html for all non-asset routes
FIX EFFORT: 15 minutes

ADD TO NGINX:
    location / {
        try_files $uri $uri/ /index.html;
    }

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

ISSUE 14: WEB UI - SECURITY HEADERS MISSING
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
TESTS FAILING: (2 tests)
    - test_security_headers_present
    - test_csrf_protection
PROBLEM: Missing X-Content-Type-Options, X-Frame-Options, CSP headers
FIX: Add security headers middleware or nginx config
FIX EFFORT: 30 minutes

ADD TO NGINX/APP:
    X-Content-Type-Options: nosniff
    X-Frame-Options: SAMEORIGIN
    Content-Security-Policy: default-src 'self'

================================================================================
REMEDIATION ROADMAP
================================================================================

PHASE 1: QUICK WINS (LOW EFFORT, HIGH IMPACT) - 65 MINUTES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Email validation (5 min)          â†’ Fixes 1 test
2. Organization tenant_id (15 min)   â†’ Fixes 9 tests
3. E2E test data fixes (20 min)      â†’ Fixes 5 tests
4. Integration test fixes (25 min)   â†’ Fixes 8 tests

PHASE 2: MODEL CREATION (MEDIUM EFFORT) - 150 MINUTES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Create 3 Pydantic models (90 min) â†’ Enables 3 tests
2. Update 3 endpoint handlers (60 min)

PHASE 3: WEB UI (VARIABLE EFFORT) - 120-180 MINUTES
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Admin pages (60-120 min)          â†’ Fixes 5 tests
2. SPA routing (15 min)              â†’ Fixes 4 tests
3. Security headers (30 min)         â†’ Fixes 2 tests

TOTAL EFFORT: 335-455 MINUTES (5.5-7.5 HOURS)

================================================================================
REQUIRED FIELDS REFERENCE
================================================================================

ORGANIZATIONS
  Required: name
  Optional: description, organization_type, parent_id, ldap_dn, saml_group
  Auto-derive: tenant_id (from parent or default=1)

ENTITIES
  Required: name, entity_type, organization_id
  Optional: description, sub_type, parent_id, attributes, tags

ISSUES
  Required: title, reporter_id
  Optional: description, status (default=open), priority (default=medium),
            issue_type (default=other), assignee_id, organization_id

SERVICES
  Required: name, organization_id
  Optional: description, domains, paths, poc_identity_id, language,
            deployment_method, is_public (default=False), port

PROJECTS
  Required: name, organization_id
  Optional: description, status (default=active), start_date, end_date

LABELS
  Required: name
  Optional: description, color (default=#cccccc)

MILESTONES (NEW)
  Required: title, organization_id
  Optional: description, due_date, status (default=active)

DATA_STORES (NEW)
  Required: name, organization_id, data_classification, storage_type
  Optional: description

WEBHOOKS (NEW)
  Required: name, url, events, organization_id
  Optional: secret, description, headers

================================================================================
SUCCESS CRITERIA
================================================================================

âœ… METRICS
  - 100% of tests passing (120/120)
  - 0 regressions in existing tests
  - No new security vulnerabilities

âœ… CODE QUALITY
  - All Pydantic models follow consistent patterns
  - @validated_request decorator used consistently
  - Proper error messages for missing fields
  - Database constraints enforced

âœ… API CONTRACTS
  - All endpoints documented with required fields
  - Error responses include field validation details
  - Backward compatibility maintained

================================================================================
NEXT STEPS
================================================================================

1. Review this analysis with team
2. Prioritize fixes by impact (Phase 1 first)
3. Assign implementation tasks
4. Run test suite after each fix to verify
5. Deploy when all tests passing

See .test_remediation_plan.md for detailed implementation instructions.

================================================================================
